define data bank3

define player_pos_adress 0
define axises_adress 5
define player_cam_rot_adress 3

define points_len_adress 14
define faces_len_adress 15
define points_proj_adress 16


R_x = data[3]
R_y = data[4]

pos_x = data[0]
pos_y = data[1]
pos_z = data[2]

screen_half_width = 88
screen_half_height = 88

focal_dist = 1


#read local Axises
XAxis_x = data[5]
XAxis_y = data[6]
XAxis_z = data[7]

YAxis_x = data[8]
YAxis_y = data[9]
YAxis_z = data[10]

ZAxis_x = data[11]
ZAxis_y = data[12]
ZAxis_z = data[13]


point_adress = 0
write_adress = 0

point_x = bank1[point_adress]
point_y = bank1[point_adress + 1]
point_z = bank1[point_adress + 2]

#for_all_points
:point_loop
    point_x = point_x - pos_x
    point_y = point_y - pos_y
    point_z = point_z - pos_z
    
    point_local_x = XAxis_x * point_x + YAxis_x * point_y + ZAxis_x * point_z
    point_local_y = XAxis_y * point_x + YAxis_y * point_y + ZAxis_y * point_z
    point_local_z = XAxis_z * point_x + YAxis_z * point_y + ZAxis_z * point_z
    
    point_proj_x = point_local_x / point_local_z * focal_dist * screen_half_width
    point_proj_y = point_local_y / point_local_z * focal_dist * screen_half_height
    
    jump not_negative_z point_local_z > 0
        point_proj_x = -point_proj_x * 1000
        point_proj_y = -point_proj_y * 1000
    :not_negative_z
    
    point_proj_x = point_proj_x + screen_half_width
    point_proj_y = point_proj_y + screen_half_height
    
    bank2[write_adress] = point_proj_x
    bank2[write_adress + 1] = point_proj_y
    
    point_adress = point_adress + 3
    write_adress = write_adress + 3
    
    point_x = bank1[point_adress]
    point_y = bank1[point_adress + 1]
    point_z = bank1[point_adress + 2]
jump point_loop point_x != 123

bank2[write_adress] = 123
